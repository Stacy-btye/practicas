using System;

namespace calculadora_de_prestamos
{
    public class Prestamos
    {

        int contador = 0;
        
        double monto, interes, calculo_porcentaje, cal_cuo_men, abono_capital, cuotas, porcentaje = 0;



        public void pedido ()
        {
            Console.WriteLine("x                    Bienvenido al sistema de prestamos                      x");
            Console.WriteLine("x                                                                            x");
            Console.WriteLine("x                                                                            x");
            Console.WriteLine("x                Ingresa la cantidad que desea tomar prestado:               x");
            Console.WriteLine("x                                                                            x");
            Console.WriteLine("x                                                                            x");
            monto = double.Parse(Console.ReadLine());
            Console.WriteLine("x    Ingresa la cantidad de cuotas en que va a pagar, expresada en meses:    x");
            Console.WriteLine("x                                                                            x");
            Console.WriteLine("x                                                                            x");

            cuotas = int.Parse(Console.ReadLine());

            Console.Clear();


            if (cuotas >= 18)
            {
                Console.WriteLine("Escriba la tasa de interés que le convenga más, sin el signo de porcentaje: ");


                Console.WriteLine(" 25%");
                Console.WriteLine(" 30%");
                Console.WriteLine(" 35%");
                porcentaje = int.Parse(Console.ReadLine());

                Console.Clear();
            }

            else
            {
                Console.WriteLine("Escriba la tasa de interés que le convenga más: ");


                Console.WriteLine(" 20%");
                Console.WriteLine(" 15%");
                Console.WriteLine(" 10%");
                porcentaje = int.Parse(Console.ReadLine());

                Console.Clear();

            }

        }


        public void calcular_tabla()
        {
            Console.WriteLine("Cantidad prestada: " + monto);
            Console.WriteLine("Tasa de interés: " + porcentaje);
            Console.WriteLine("Cantidad de cuotas, expresada en meses: " + cuotas);

            Console.WriteLine("                                                   Tabla de amoratización.     ");
            Console.WriteLine("||    Periodo    ||     Intereses     ||     Cuota fija    ||     Abono a capital       ||     Capital pendiente     ||");


            calculo_porcentaje = porcentaje / 100;

            interes = monto * calculo_porcentaje*30 / 365;

            cal_cuo_men = Math.Round(porcentaje - monto) / 1 * (-1 + porcentaje) * Math.Exp(-cuotas);

            abono_capital = cal_cuo_men - interes;

            while (contador <= cuotas)
            {
                abono_capital = cal_cuo_men - interes;
                monto = monto - abono_capital;

                Console.WriteLine("||" + contador + "||" + interes + "||" + cal_cuo_men + "||" + abono_capital + "||" + monto + "||");
                interes = cal_cuo_men - abono_capital;
                contador = contador + 1;

            }
        }


       

    }


    class program
    {

        public static void Main()
        {
            Prestamos t = new Prestamos();

            t.pedido();
            t.calcular_tabla();
           

        }
    }
}
